castle 2:

- when our interact key activates pointing device sensor on VRML castle level,
  our normal interact key handling doesn't know about it --- and still
  seeks for 3d objects to press, eventually making "beep" to signal
  it's not found.

  This isn't much problem now, as there aren't TouchSensors used
  actually in current levels, but it will become a problem later.

- Make sure this input is always blocked for MenuBackground?
  Or maybe allow input for MenuBackground, maybe this will be actually useful?

- make news item "call for help" for 3d data at some point
  (maybe freegamer will broadcast it? :)

- make some creature use generatedcubemaptexture, to show it off
  (needs creatures added to scenemanager, or do generatedcubemap by hand?
  or maybe just static ImageCubeMapTexture could be cool enough?)

------------------------------------------------------------------------------
Resigned: fountain new level for castle 1.0.0:
- tentacles from fountain
- splash sound when entering fountain
- touch sensor to bring down elevator and go up over the columns
- a path over the columns around the fountain
- animated light, with shadows and bump mapping, circling the fountain
- water flowing from the fountain (water flowing sound),
  baked from fluid sim by blender,
  with mat transparent to look like water really
- maybe change the scenery to more sunny and indoors:
  sunny sky
  part. transp. dome over the fountain
- footsteps sound with more echo, to show space
- maybe small fog (3d tex?) rising from the fountain

------------------------------------------------------------------------------
- same plane walls on doom e1m1 level:
  - at the first door
  - right when opening the secret (lighter) door
  (exist also in srcs before TLevelObject - T3D transition, so this isn't any bug from this.)

- make real bump mapping demos:
  - add bump maps everywhere ?, make some lights dynamic

- when loading creatures required by player for doom level, for a second
  the menu background level flashes between DOOM level splash and doom level gameplay.
  That's because of the way Doom level splash is done.

- ConserveResource finish:
  - some creatures are dependencies of others, like ThrownWeb from SpiderQueen
    or BallMissile from Alien

- fountain finish:
  trees, bushes around (natural LevelBox)
  light changing (fire pots in the corner(s) ?)
  footsteps: splashes on water
  fountain: water sparkling (use blender's particle animation)
  sounds: some birds, water sparkling

- make gamma correction.
    Windows: http://www.delphi3d.net/articles/viewarticle.php?article=gamma.htm

- Circular (Laz forum), others:
  move speed too fast
  visual hint when monster is hit


- rudy usability test:
  - again, mouse over yes/no message boxes should work
  - level of oxygen under water should be shown
  - unfixable? (just don't do this in new game...)
    - forcing player to jump is just bad
    - on 1st level, there is a general feeling that "you don't know what to do"

- Kasia usability test:
  - mouse over yes/no message boxes should work (confirmed Eric)
    confirmed Circular (laz forum)
  - spider on the gate level is not really interesting. Make spider ambush ? On the cart --- suddenly a group of spiders crawls from an egg ? Or on the sword pit --- suddenly group of spiders crawls from underneath ?
  - enter/exit on levels should be more black, to suggest more that these are enter/exit, not a normal wall
  - items should automatically hide if they were uncovered by automatic show ?
    Users usually don't know immediately how to close them, and play
    with items list visible for a long the time, cluttering the screen.
    Maybe automatically hide items after some time without using
    (no [, ], pickup or Enter used). This way "i" (when items are visible)
    becomes a shortcut to hide items quick, but eventually they'll hide
    anyway.
  - when fps is low, and no fullscreen, the mouse sometimes gets
    outside of the window.
    This causes additional problems, since then it's easy to
    accidentaly switch to other program while playing the game.

- finish menu background level:
  - add some shadow ?

- make gate light darker ? like szymon proposed ? test on kocury.

- new shadows:
  - make better lights, to show shadows better.
    In gate: shadow of ghosts over the wall ?
  - it's still too slow on some levels (doom e1m1)
  - allow items to cast shadows
  - eventually, allow items and creatures to be in shadow
  - kambiShadows and kambiShadowsMain:
    - for headlight should be too
    - background castle level when this light actually moves
  - dyn shadows from more than one light need to be done
    (additive rendering of lights), then scene_dynamic_shadows will
    allow for more interesting shadows also
  - need to be optimized more to enabled by default.
    Then set DefaultRenderShadows to true, and remove the warning in
    CastleStartMenu when changing RenderShadows.

- make castle gate with shadows baked on ground.
  This is done in gate blender model, and once I used it actually in the game
  --- but it looks too ugly. We must be able to handle much larger
  texture sizes to actually use this on the gate level.

- doom:
  - make barrels explode nicely
  - creatures should take hurt from lava too, and should know that they
    don't want to step on lava. Room with lava on e1m1 may require some
    waypoints for sensible creature move.
  - make small and blue armor for doom level (items' stubs are already placed
    in blend file, on layer 9/10)
  - room 5: creatures should see through texture with alpha channel
  - if you know how, you can cause bad collisions and get out of the level
    on elevator 9a-9b because of MovePushesOthers problems.
  - still too dark. Secret on 9a-9b should be activated differently ?
    Or wall should be specially visible ? Maybe more visible the
    alternative entrance there (through the barrels) --- different wall
    color ?

- weapons should be rendered correctly in 3d.
  - Sword should also glow red when "castle hall" glows red --- even
    the static sword should be rendered in 3d.
  - weapon "swaying" (when you walk, your weapon moves with your steps)
  - also, sword must "feel" better (Szymon):
    - render weapon (both when static and when attacking) as truly 3d,
      truly inside the level (so sword size must match level/creatures
      proportions etc.)
    - some anim of blood when hit (more feedback that you hit)
    - design just better (and more, maybe randomized) animations
      of sword attack. Do them in Blender, not by hand, like current
      anim.
    - better checking for collision with sword? Maybe actually calculate
      oriented bounding box of the sword for collision with creatures each
      frame?

- bow must work better to really appreciate the doom level !

- fire over barrels - pixel pracht finally ?

- ball missile should hit other creatures too (helpful on crowdy places
  on Doom level), barrels too

- load level music only when it's needed

- on castle_hall level, stand very close the box that has the button on it.
  Press "crouch". You start slowly getting falling down effect.

- levels/index.xml:
  - level objects hierarchy could be defined in such file
  - the base level scene can be TLevelStaticObject too !

- knockback for player sword (or for some other short-range weapon ?)

- Radeon problems

  IIUni tests (retest this after "converse memory" feature) :
  - test "9.No music on "The Gate" level. Oh, and the menu music also doesn't play when going back from the game."
    When run with --debug-no-creatures, music is OK.
    Didn't manage to run without --debug-no-creatures.
    Retest now with "conserve memory" feature.

  Reported on PGD
  (Retest now with "conserve memory" feature) :
  6.FPS is awfully low.
    Note: FPS seems much better with "render for level screenshot" = yes.
    I'm probably doing something un-optimal on Radeon when drawing
    2d controls. Make sure exactly what it is.
    Later: this is somewhat difficult to reproduce on IIUni...
    Ignore for 0.7.0 ?

  7.Switching task (Alt+Tab) and going back to game causes "can't change display settings" warning.
    Confirmed on on IIUni. Ignore for 0.7.0.

  8.Using ctrl+alt+del to bring taskmgr -> taskmgr.exe fails. Well, this is definitely Radeon's problem. But maybe I'm just overloading the system too much ?
    Confirmed on on IIUni. Ignore for 0.7.0.

  9.No music on "The Gate" level. Oh, and the menu music also doesn't play when going back from the game.

  - Check changing ColorsBits and VideoFrequency on Radeon, maybe will help for some problems ?
    Check disabling lockArrays in renderer.

- Paul: going up the steps could do with a smoother animation

- Eric stage 6 comment:
  - Display frequency can be changed, but is 60Hz by default, has to be changed by hand and is not hardware's optimal value
  - I just saw one problem: when you switch (alt+tab) to other window, but the game window remains visible on the desktop, then the mouse is hidden when you mouse over the game window (even though the other window has focus).

- werewolf's mouth is too dark

- (2006-05-08 11:42:27) Szymon: hej tu kasia co do poprawek takich prostych i na szybko to mam pytanie o klucz
  (2006-05-08 11:43:15) Szymon: bo szczerze mowiac to go ledwo widac... fajnie by bylo gdyby byl jakos oswietlony...

- bow more interesting:
  - When you hold attack key, arrow/bolt appears on your bow/crossbow
    and you're holding the bow. There is also a crosshair (circle target area)
    that "trembles", because your hands are trembling.

    You shoot when you release Ctrl key. The longer you held Ctrl,
    the more power has the arrow (more velocity), but also the trembling
    of your crosshair (and it's circle) is larger, so your accuracy
    is lower.
  - crosshair for bow
  - showing arrow in shooting anim for bow

- intro moving when the game starts (either movie from the game --- or just some
  nice anim, moving camera around the level.)

Stage 6:
Goal #5 (2.5 Points) - Have a minimum of 2 mini-bosses you must fight in the game.

- gate:
  - use S&K red light with maxed intensity to shine on the top of the sword.
  - one tree is inside murek, move it
  - top of columns and "wieza" have wrong UV coords, fix

- better spider_queen model. Inspiration ?
  http://ultimosdiasdegloria.bluehosting.com.br/downloads/arquivos/CitySpiderQueen02.jpg
  http://ultimosdiasdegloria.bluehosting.com.br/downloads/arquivos/CitySpiderQueen01.jpg
  http://ultimosdiasdegloria.bluehosting.com.br/downloads/arquivos/CitySpiderQueen03.jpg

- spider_appears.wav sound do

- spider: try to climb by doing additional MoveAlowed with higher destination
  position. They can't climb on logs now (but maybe it's a good thing ?)

  same for spider_queen --- it can't climb back to MeshTunnel.

- spider queen:
  - lay eggs, produce normal spiders.
  - remove/fix dying sound, it's too shriek (making it more quiet doesn't
    help for all positions)

- alien:
  more aliens on castle_hall ?
  texture the alien finally ?

- test game messages in the middle of the screen ?

- some effects: blood explode when player hits monster.

cages level:
- windows: don't look like windows
- player can fly through windows --- not good.
- stairs beginning cages and ending castle_hall: endings should be more black, current vertex colouring is not black enough

- gate:
  - Wall of fence around the level, to get rid of invisible walls.
    Chebmaster:
    a) impassabe cliffs/abysses at the edges of the landscape
       (too high/wide to pass even by flying)
    b) endless sea (level=island)

    Hmm, both are good ideas. I don't want to surround the whole level with sea (I want the level to "feel" like in the middle of the forest). Actually, maybe I'll use all three ideas ---- on the left side of the level I could do a cliff, on the right and bottom I could use wall of fance, and add a little "opening on the sea" on the right side where the river ends.

- cages level:
  - on the other side of the wall, also a door, but blocked by rocks
  - from queen lair, passage to this 2nd hidden room --- some treasures there
  - make real doors that you must click to open them

- "Color depth" and "Display Frequency" are ignored on non-Windows targets.
  (Seems that judges and most people test on Windows, so no time (it's already 4th May)
  to do this for Unix (xvf86mode) now.

  "Display Frequency" should be definitely possible using xvf86mode,

  "Color depth" --- I'm not sure.
  Looking at xvidtune and gnome-display-properties : no such possibility.
  Possibly color depth is not switchable without restarting XWindows ?

- thunder:
  - 3d sound ?
  - if the light would only shine through the window's shapes it would be even better.

Cages level:
- this natural rock thing better ?
- torch model base : use nice mesh from the base on lantern3.3ds from 3dcafe.com ?

- headlight on cages level ? By torch item ?
  No ? Spot headlight looks poor (must over-triangulate meshes),
  and it doesn't resemble a torch anyway. Positional light with attenuation
  also doesn't look too special.

- Things that I would like to show in new levels:
  - swimming feels great --- show it off more ?
  - lights: Spot light. Moving light.
  - Some moving objects on the level: this is easy to do in my levels. Use it more !
  - more environ sounds: wind blowing.
  - homing missiles make great effect on a vast empty space, like in "Tower" level. Demonstrate this in some "real" level too!

- chooseNewLevel menu: display thumbnails of levels

- when player walks, his weapon should slowly move

- mouse smoothing for mouse look ?
  Seems not needed, at least with my mouse ?
  Players with poor mouses can always just use keys ?

- fix GTK backend to resize screen (surprisingly, it seems that I should
  just use XFV86VidMode from Xlib ? GTK does not wrap this ?)
  and then compile release versions of "The Castle" with GTK backend,
  avoiding override_redirect.

- Mama reports:
  Po uruchomieniu castle.exe mam taki komunikat:
    Error
    castle: Exception EAccessViolation:
    Access violation
  pod windows'98

- creature's footsteps sound ?

- sound when creature sees player for the 1st time

- music volume is affected by sound volume now. That's because listener gain affects everything...

- Add names of guys that did the loops, maybe send them mails ? Some of the loops are plainly great!

- choosing Min/MaxALAllocatedSounds from menu.

- why with wide angle the corner geometry is sometimes clipped ?

- sometimes spider_queen may get stuck in the ground ---
  that's because camera sphere
  middle changes with anim. Maybe make it non-changing ?

- "Restore defaults" in Sound options.

- Enemies:
  - More enemies attacks.
  - Nice 3d effects (lighting-like things, explosions etc.).
  - Models of the two current creatures need to be improved.
    Model of "alien" creature will probably be just removed and replaced
    by something else.
  - Just add more creatures.
    creature hydra (very tall, very long when killed; will be a nice demo of my good collision checking routines)
    creature that attacks by snapping it hand (tentacle ?) far out

- "The Gate" level:
  - intro under menu: camera floating around level with this fog ?

- There must be a way to say that some sectors are not important
  for AI for creatures with Flying. (like ghost)

- sectors and waypoints finish, see README for TO-DOs.

- Improve collisions player<->creatures and player<->items to
  check not only final collisions, but also segment collisions when moving ?
  Otherwise when moving fast (or low FPS count, so FpsCompSpeed large),
  this collision check can fail to work.

  This doesn't seem to be a problem in practice, in practice moving speed is
  not so large (unless running on some ancient GPU with 1 frame per second,
  but there the game is not playable anyway...).

- do weather (I have snow and rain from my szklane_lasy, but they look poor...)

- weapon-less attack (does knockback + small damage)

- non-moving creature (just shooting etc.)

- avoiding falling down sometimes doesn't work like it should.
  I think that I know why: I check where the creature will be after
  2 secs, but what if there is a pit between 2 secs and current pos ?
  Fix by checking everything *along the 2 secs way*.

- ball_missile looks rather funny, too colorful.
  It must look like something fiery, or lighting, or just anything
  that seems at least a little dangerous :)

- various kinds of swinging the sword, with various animations.
  Also they can yield various damage and various hit chances.

- Smooth between various creature states.
  I.e. expand the idea of StandToWalkAnimation, for every combination
  and make it automatic.
  Problem: long load times ("Loading creatures...") and memory consumption.

- creatures can climb high (almost-vertical) walls.
  Actually, player can climb almost-vertical walls too !

  This is not so very noticeable now, because there are no high walls
  now, and creatures' AI doesn't let them fall into deep pits now.

  As a workaround, basic_castle's moat has now edges that are wider down,
  so player and creatures are never able to climb up from the moat...
  But that's still just a workaround.

- I really don't like the "alien" model. It's generally nice,
  but it doesn't fit this game, and I just can't texture it appropriately.
  The basic model was just taken from www.3dcafe.com when I realized that
  I don't have time to make some really nice creature model before
  stage 4 deadline.

  So this creature model is scheduled to be removed and replaced by something
  better after stage 4 deadline.

- put some vertical crates around GlassPrison on basic_castle

- "shrink" spell (that was *coool* in DUKE 3D !)
  "freeze" (it's from DUKE 3D also)
  "fry"
  "throw back" (throws all enemies slightly backward --- this is also useful
     for player to actually see that monsters get hurt when falling from high)

- change the name --- there already exists game named "castle"!
  And there is "Castle Adventure" !

  "Castle in the rock"
  "High castle"
  "Castle above the mist" ?

- idea from quake: water surface slowly moving (change/move the texture?
  some deformation of the texture ? I'm not sure how to do this trick,
  but it looks very nice!)

- Some buttons visible at lower part of the screen to access some
  things with mouse and to show (as hints) their key shortcuts ?
  ("i" - inventory on/off, "m" - messages).

- mail to author of
  http://www.astrooptik.com/Bildergalerie/latest_namibia/pictures.htm
  : permission to use stars.jpg in my game ?

- apply nice "strips" texture to handle of the sword,
  see http://mediawiki.blender.org/index.php/Manual/PartII/Basic_Mesh_Modelling

- some alpha rect around the item's model ?
  test, although it seems that rotating is enough.

- Not bad creature models from www.3dcafe.com:

  horror/abom
  anatomy_people/creature
  anatomy_people/vampire

  /win/3dmodels/www.katorlegaz.com/animals/horse

- Load / save game ability.

  Place load in the start menu.
  Place save in the game menu.
  In the game menu, when asking before "End Game", do question
  like "Do you want to save the game before ending ?"
  with answers "Save and end the game", "Don't save and end the game", "Cancel".

  When loading game, load saved Notifications for this game.

- It would be nice to get Mesa3D working with my game. Right now I get
    castle: indirect_vertex_array.c:1359: __indirect_glTexCoordPointer: Assertion `a != ((void *)0)' failed.
  when loading level, which seems to be a
  <a href="http://forum.linspire.com/viewtopic.php?t=423672&">common
  problem with Mesa</a>

  Update: on kocury, GL_VERSION 1.2 (1.5 Mesa 6.4.1) works OK now.
  Test on ii.uni in 137 room.

----------------------------------------
dist-making to-dos:

- Makefile to pack distro of my game: add at some point svn log:
  svn log -v REPO-URL castle/trunk castle_game_engine/trunk > ChangeLog

- real exe installer for Windows,
  include OpenAL installer
  (run after the question "install Creative's OpenAL implementation ?"
  Problem: OpenAL installer is quite dumb and can only do system-wide
  installation (you need admin access)).

- real packages for Linux, depend (as recommend:) on OpenAL packages

----------------------------------------
Each time before uploading release:

- test data/ things easy to forget:
  - All textures in VRML files must have relative filenames
      find data/ -type f -iname '*.wrl' | \
        xargs grep filename | \
        grep --invert-match "filename ../" | \
        grep --invert-match "filename //../"
  - All sounds that are intended to be spatialized must be mono:
      wavidentify data/sounds/*.wav | grep stereo

- make sure Version (in castlehelp.pas) is good
- Remember to test whether FPC version used was correct
  (to avoid accidentaly compiling with some SVN intermediate version etc.)
- make release like for all other programs, see ../www/pack/README.txt

- extract created dist
  - test running from extracted created dist
      rm -f ~/.castle.data
      ln -s /tmp/ggg/castle/ ~/.castle.data
      ./castle
      rm -f ~/.castle.data
      ln -s /win/mojepasy/openGL/castle/trunk/ ~/.castle.data
  - test building from extracted created dist (using `make build-xxx')

- upload to WWW:
  release on SourceForge as usual (verify that file uploaded ok)

- make svntag, check it's done in repo

----------------------------------------
