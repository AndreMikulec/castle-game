- decrease player speed (he's even faster than ball missile !)

- Eric stage 4 comments answer:

    Level loading seems to be quite long given the relatively low complexity of meshes and textures, could be something to watch before levels become more complex.

    - That's because loading creatures takes long (animations must be generated, along with display lists). I improved it after stage 4 deadline --- it's about 4x faster now. On the other hand, new creatures will be added for stage 5, so the whole process will probably get slower again...

      In any case, loading creatures happens only when loading the very first level, when loading further levels (or ending game and executing "New game" once again) creatures will not be loaded again, so this will not slow down the game between the levels.

  Movement is blocked by dead aliens (which aren't visible when you're blocked on them, too low and flat on the floor), you can also get "stuck" when colliding against a wall, instead of sliding.

    - Two known problems. To be fixed.

  Default movement controls key setup is also quite uncommon (need to read the help to figure them out).

    - Much like normal Quake/Duke/Doom things ? Unlike newer games (HalfLife 2), but then the mouse is not used as usual. (known thing, maybe will be fixed).

  Finally, readme and text files are UNIX-style, which means notepad and common Windows text viewers won't display them correctly (okay for me, but be aware many end-users will be unable to view them correctly).

    - Good point, I changed line endings to DOS-style for README and TODO files. The rest if text files is not intended to be read by end-users, so I guess it's not a problem.

--------------------
- creature<->creature collision is also needed

- when player stops moving, head bobbing should go down automatically

- when creature dies, the effect is not natural, player often feels
  "stuck" and cannot move.
  Sometimes I can walk "through" some creature, e.g. werewolf.
  Maybe I should add creatures to GetCameraHeight ?

--------------------
Must-have before next stage:

Stage 5 (3 weeks): Mar 26th - Apr 15th
Goal #1 (10 Points) - Engine must allow you to play more than one level per play. Design a minimum of 2 levels to be played by optional selection or in sequence.
Goal #2 (10 Points) - Add basic menus, game options and settings.

- Eric:
There is something about the FOV and/or movement speed that made me feel somewhat queasy after some wandering around in the stage 3 level (not so much in the castle level, but it was more open).

Half-life explains this:

[http://developer.valvesoftware.com/wiki/Field_of_View]
Note: Some people experience sickness with the FOV in Half-Life 2 which is set to 75 by default. This is mostly because the default FOV in other games is set to 90. If you are experiencing such problems in Half-Life 2, try to change the FOV to 90 using the command sv_cheats 1;fov 90 in the console.

(FOV is vertical angle in Half-Life 2).

[http://en.wikipedia.org/wiki/Half-Life_2_controversies_and_criticisms]

--------------------
Would-be-nice before next stage:

--------------------
- "The Gate" level:
  - volumetric fog (like from malfunction) needed there. I also want to demonstrate fog in my engine...
  - intro under menu: camera floating around level with this fog ?
  - walking down the stairs and down the hill causes player to lose life

- Do Flying creature (Like a ghost ? Only blended things ? Would be nice...)
  - There must be a way to say that some sectors are not important
    for AI for creatures with Flying.

- sectors and waypoints finish, see README for TO-DOs.

- do weather (I have snow and rain from my szklane_lasy, but they look poor...)

- weapon-less attack (does knockback + small damage)

- non-moving creature (just shooting etc.)

- avoiding falling down sometimes doesn't work like it should.
  I think that I know why: I check where the creature will be after
  2 secs, but what if there is a pit between 2 secs and current pos ?
  Fix by checking everything *along the 2 secs way*.

- right now pressing Ctrl blocks rotations and moves (because of
  ModsDown = [] in MatrixNavigation). Fix.

- ball_missile looks rather funny, too colorful.
  It must look like something fiery, or lighting, or just anything
  that seems at least a little dangerous :)

- various kinds of swinging the sword, with various animations.
  Also they can yield various damage and various hit chances.

- Smooth between various creature states.
  I.e. expand the idea of StandToWalkAnimation, for every combination
  and make it automatic.
  Problem: long load times ("Loading creatures...") and memory consumption.

- Take TItemKind and TCreatureKind PrepareRender, PrepareRenderSteps, CloseGL
  into one base class, like TGLLoading or something like that.

- creatures can climb high (almost-vertical) walls.
  Actually, player can climb almost-vertical walls too !

  This is not so very noticeable now, because there are no high walls
  now, and creatures' AI doesn't let them fall into deep pits now.

  As a workaround, basic_castle's moat has now edges that are wider down,
  so player and creatures are never able to climb up from the moat...
  But that's still just a workaround.

- some effects: blood explode when player hits monster.

- creature that attacks from short-range (swordsman, golem etc.)

- I really don't like the "alien" model. It's generally nice,
  but it doesn't fit this game, and I just can't texture it appropriately.
  The basic model was just taken from www.3dcafe.com when I realized that
  I don't have time to make some really nice creature model before
  stage 4 deadline.

  So this creature model is scheduled to be removed and replaced by something
  better after stage 4 deadline.

- in game, in config controls, escape should go back to game.

- put some vertical crates around GlassPrison on basic_castle

- shadow under the creatures would be nice (sgk_shadows should allow
  me to this super-nicely)

- "shrink" spell (that was *coool* in DUKE 3D !)
  "freeze" (it's from DUKE 3D also)
  "fry"
  "throw back" (throws all enemies slightly backward --- this is also useful
     for player to actually see that monsters get hurt when falling from high)

- Maybe it's sometimes a good idea to not create separate display
  list for each frame. Instead, it two scenes share the same RootNode
  and differ e.g. only in CurrentMatrix states, then I can use
  one display list and do glPushMatrix,MultMatrix,render,PopMatrix.
  This could save some loading time for e.g. ball_missile anim
  (but not for alien animations, as they change geometry).

- intro moving when the game starts (either movie from the game --- or just some
  nice anim ? Look how much it adds to AirBlast !)

- second weapon, crossbow/bow, that requires another item in your inventory
  (bolts/arrows)

  When you hold attack key, arrow/bolt appears on your bow/crossbow
  and you're holding the bow. There is also a crosshair (circle target area)
  that "trembles", because your hands are trembling.

  You shoot when you release Ctrl key. The longer you held Ctrl,
  the more power has the arrow (more velocity), but also the trembling
  of your crosshair (and it's circle) is larger, so your accuracy
  is lower.

- inventory should be able to scroll, when more than MaxInventorySlots items
  are available.

- test on high resolution screen (19'' etc.) --- do I have this problem
  with screen refresh rate that Eric talkes about ?

  I can implement refresh changes on Windows, like in GLScene:
    /win/mojepasy/delphi/units/not_kambi/GLScene/newest/Source/GLScreen.pas
  see SetFullscreenMode:

      if displayFrequency>0 then begin
         dmFields:=dmFields or DM_DISPLAYFREQUENCY;
         if displayFrequency>vVideoModes[ModeIndex].MaxFrequency then
            displayFrequency:=vVideoModes[ModeIndex].MaxFrequency;
         dmDisplayFrequency:=displayFrequency;
      end;

  I can do this in my TGLWindow.VideoChange.

- sound configuration do -- allow turning sounds on/off from menu, allow volume control

  Add to "installing and running" in README:
  Note that to hear sounds you should first install OpenAL
  (see [http://www.camelot.homedns.org/~michalis/openal_notes.php#section_install]).

- change the name --- there already exists game named "castle"!
  And there is "Castle Adventure" !

  "Castle in the rock"
  "High castle"
  "Castle above the mist" ?

- Do navigating with mouse, like in Quake.
  Hmm. Collides with mouse picking ?

- Some buttons visible at lower part of the screen to access some
  things with mouse and to show (as hints) their key shortcuts ?
  ("i" - inventory on/off, "m" - messages).

- debug menu is only for testing -- hide somehow at some point.

- remove base_castle (or make it hidden ?),
  together with it's sky (this was copied from lets_take_a_walk),
  --- this was just a testing level.

- key names: bold, key meaning = not bold
  This is a nice Mama idea, but it will require changing GLWinMessages implementation, so probably will not be done for PGD compo.

- mail to author of
  http://www.astrooptik.com/Bildergalerie/latest_namibia/pictures.htm
  : permission to use stars.jpg in my game ?

- apply nice "strips" texture to handle of the sword,
  see http://mediawiki.blender.org/index.php/Manual/PartII/Basic_Mesh_Modelling

- some alpha rect around the item's model ?
  test, although it seems that rotating is enough.

- Not bad creature models from www.3dcafe.com:

  horror/abom
  anatomy_people/creature
  anatomy_people/vampire

- some things for menu:

  sound:
    Music: on/off [on]
    Music volume: (slider)
    Sound: on/off [on]
    Sound volume: (slider)

  graphics:
    Allow resizing the screen at startup: on/off [on]
    Texture minification quality: (opengl options)
    Texture magnification quality: (opengl options)
    Blending: (for attrib_blending somewhere)
    Animation smoothness: (slider: between 10 and 100)
      (for AnimScenesPerUnit in CastleCreatures)
    Creature shadows: on/off [on]

  keyboard:
    All keys configurable here.

  load game, save game abilities.

- Load / save game ability.

  Place load in the start menu.
  Place save in the game menu.
  In the game menu, when asking before "End Game", do question
  like "Do you want to save the game before ending ?"
  with answers "Save and end the game", "Don't save and end the game", "Cancel".

----------------------------------------
dist-making to-dos:

- prepare some binary only distro ?
  it doesn't need many things, including all sources and *
  .blend and *.xcf (and some other internals in menu_bg)

- Makefile to pack distro of my game:
  add at some point svn log (with files, i.e. C-u svn log) of trunk,
  add svn log of units changes,
  say somewhere that this was developed as part of svn repository.

  svn log -v file:///home/michal/svn/kambi-svn-repos/ \
    castle/trunk kambi_pascal_units/trunk > ChangeLog

----------------------------------------
Each time before uploading PGD release:

- make sure Version (in castlehelp.pas) is good
- under Linux and Windows:
  - build debug exe from this dir, test
      make -C /win/mojepasy/units/ clean
      open castle.dpr,
      C-F9
      ./castle
  - build release exe from this dir, test
      make -C /win/mojepasy/units/ clean
      open castle.dpr,
      C-F10
      ./castle
  - make dist
  - extract created dist
  - test running from extracted created dist
      rm -f ~/.castle.data
      ln -s /tmp/ggg/castle/ ~/.castle.data
      ./castle
      rm -f ~/.castle.data
      ln -s /win/mojepasy/openGL/castle/trunk/ ~/.castle.data
  - test building from extracted created dist (using `make build-xxx')

----------------------------------------